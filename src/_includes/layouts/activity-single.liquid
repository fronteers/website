{%- assign today = "now" | date: "%Y%m%d" | plus: 0 -%}
{%- assign eventDate = eventdate | date: "%Y%m%d" | plus: 0 -%}
{% if today <= eventDate %}
    {%- assign eventHasHappened = false -%}
{% else %}
    {%- assign eventHasHappened = true -%}
{% endif %}
    
    {%- include partials/utility/html-head -%}
<body data-layout="activity-single">
    {%- include partials/page-header/_page-header -%}

    <main id="main" class="inner-wrapper {% if useHero %}styledheader{% endif %}">
        <div class="page-content page-content--activity">
            <div class="activity-content">
                {% unless useHero %}
                    <h2>{{ title }}</h2>
                
                    <div class="activity-tags">
                        {%- for tag in categories -%}
                            <a href="/{{ translations[locale].activitiesURL }}/{{ translations[locale].category }}/{{ tag | slugify }}/" class="tag-link">{%- tag tag -%}</a>
                        {%- endfor -%}
                    </div>

                    {% if eventdate %}
                    <p class="activity-date">
                        {%- include svg/icon_calendar.svg -%} 
                        <span>{{ translations[locale].activityDate }}:</span> 
                        {% if eventtime %}
                            {%- assign datePart = eventdate | date: "%Y-%m-%d" -%}
                            {%- assign timePart = eventtime | strip -%}
                            {%- if timePart.size == 5 -%}
                                {%- assign timePart = timePart | append: ":00" -%}
                            {%- endif -%}
                            {%- assign fullDateTime = datePart | append: "T" | append: timePart -%}
                            <time class="activity-time" datetime="{{ fullDateTime }}">
                                {{ eventdate | eventDate: locale }} - {{ eventtime | strip }}
                            </time>
                        {% else %}
                            <time class="activity-time" datetime="{{ eventdate | date: "%Y-%m-%d" }}">
                                {%- if locale == "nl" -%}
                                    {{ eventdate | eventDate: 'nl', eventdateTentative }}
                                {%- elsif locale == "en" -%}
                                    {{ eventdate | eventDate: 'en', eventdateTentative }}
                                {%- endif -%}
                            </time>
                        {% endif %}
                    </p>
                    {% endif %}
                {% endunless %}

                {%- if location and location != "" -%}
                    <p class="activity-location">{%- include svg/icon_location.svg -%}
                        <span class="visually-hidden">{{ translations[locale].location }}</span>
                        {% if locationLink == true %}
                            <a href="https://www.openstreetmap.org/search?query={{ location | url_encode }}" target="_blank" rel="noopener noreferrer">{{ location }}</a>
                        {% else %}
                            {{ location }}
                        {% endif %}
                    </p>
                {%- else -%}
                    {%- if not eventHasHappened -%}
                        <p class="activity-location">{%- include svg/icon_location.svg -%}
                            <span class="visually-hidden">{{ translations[locale].location }}</span>
                            {{ translations[locale].locationUnknown }}
                        </p>
                    {%- endif -%}
                {%- endif -%}

                {% if content != "" %}
                    <hr />
                {% endif %}

                {{ content }}
            </div> 
            <div class="activity-footer">
                {% if eventHasHappened or signupavailable != 'false' %}
                    {%- assign meetupLinkValue = meetuplink | default: meetupLink -%}
                    {%- if meetupLinkValue and meetupLinkValue != "" -%}
                        <a
                            href="{{ meetupLinkValue }}"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="button">{{ translations[locale].signUpMeetup }}<span class="visually-hidden"> {{ translations[locale].for }} {{ title }}</span>
                        </a>
                    {%- endif -%}

                    {% if signupmail and signupmail != "" -%}
                        <a
                            href="mailto:{{ signupmail }}?subject=Aanmelding%20voor%20{{ title }}"
                            class="button">{{ translations[locale].signUpMail }}<span class="visually-hidden"> {{ translations[locale].about }} {{ title }}</span>
                        </a>
                    {% elsif externalUrl and externalUrl != "" -%}
                        <a
                            href="{{ externalUrl }}"
                            target="_blank"
                            rel="noopener noreferrer"
                            class="button">{{ translations[locale].moreInformation }}<span class="visually-hidden"> {{ translations[locale].about }} {{ title }}</span>
                        </a>
                    {%- endif -%}
                {% else %}
                    <p>{{ translations[locale].signUpClosed }}</p>
                {% endif %}

            </div>
        </div>
    </main>

    {%- include partials/utility/edit-this-page -%}

    {%- include partials/page-footer/_page-footer -%}
</body>
</html>
